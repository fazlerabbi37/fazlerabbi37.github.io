<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta charset="utf-8"/>
<meta name="generator" content="Docutils 0.14: http://docutils.sourceforge.net/" />
<title>Docker Cheat Sheet</title>
<style type="text/css">

/* Minimal style sheet for the HTML output of Docutils.                    */
/*                                                                         */
/* :Author: Günter Milde, based on html4css1.css by David Goodger          */
/* :Id: $Id: minimal.css 8036 2017-02-14 13:05:46Z milde $               */
/* :Copyright: © 2015 Günter Milde.                                        */
/* :License: Released under the terms of the `2-Clause BSD license`_,      */
/*    in short:                                                            */
/*                                                                         */
/*    Copying and distribution of this file, with or without modification, */
/*    are permitted in any medium without royalty provided the copyright   */
/*    notice and this notice are preserved.                                */
/*                                                                         */
/*    This file is offered as-is, without any warranty.                    */
/*                                                                         */
/* .. _2-Clause BSD license: http://www.spdx.org/licenses/BSD-2-Clause     */

/* This CSS2.1_ stylesheet defines rules for Docutils elements without    */
/* HTML equivalent. It is required to make the document semantic visible. */
/*                                                                        */
/* .. _CSS2.1: http://www.w3.org/TR/CSS2                                  */
/* .. _validates: http://jigsaw.w3.org/css-validator/validator$link       */

/* alignment of text and inline objects inside block objects*/
.align-left   { text-align: left; }
.align-right  { text-align: right; }
.align-center { clear: both; text-align: center; }
.align-top    { vertical-align: top; }
.align-middle { vertical-align: middle; }
.align-bottom { vertical-align: bottom; }

/* titles */
h1.title, p.subtitle {
  text-align: center;
}
p.admonition-title,
p.topic-title,
p.sidebar-title,
p.rubric,
p.system-message-title {
  font-weight: bold;
}
h1 + p.subtitle,
h1 + p.section-subtitle {
  font-size: 1.6em;
}
h2 + p.section-subtitle { font-size: 1.28em; }
p.subtitle,
p.section-subtitle,
p.sidebar-subtitle {
  font-weight: bold;
  margin-top: -0.5em;
}
p.sidebar-title,
p.rubric {
  font-size: larger;
}
p.rubric { color: maroon; }
a.toc-backref {
  color: black;
  text-decoration: none; }

/* Warnings, Errors */
div.caution p.admonition-title,
div.attention p.admonition-title,
div.danger p.admonition-title,
div.error p.admonition-title,
div.warning p.admonition-title,
div.system-messages h1,
div.error,
span.problematic,
p.system-message-title {
  color: red;
}

/* inline literals */
span.docutils.literal {
  font-family: monospace;
  white-space: pre-wrap;
}
/* do not wraph at hyphens and similar: */
.literal > span.pre { white-space: nowrap; }

/* Lists */

/* compact and simple lists: no margin between items */
.simple  li, .compact li,
.simple  ul, .compact ul,
.simple  ol, .compact ol,
.simple > li p, .compact > li p,
dl.simple > dd, dl.compact > dd {
  margin-top: 0;
  margin-bottom: 0;
}

/* Table of Contents */
div.topic.contents { margin: 0; }
ul.auto-toc {
  list-style-type: none;
  padding-left: 1.5em; }

/* Enumerated Lists */
ol.arabic     { list-style: decimal }
ol.loweralpha { list-style: lower-alpha }
ol.upperalpha { list-style: upper-alpha }
ol.lowerroman { list-style: lower-roman }
ol.upperroman { list-style: upper-roman }

dt span.classifier { font-style: italic }
dt span.classifier:before {
  font-style: normal;
  margin: 0.5em;
  content: ":";
}

/* Field Lists and drivatives */
/* bold field name, content starts on the same line */
dl.field-list > dt,
dl.option-list > dt,
dl.docinfo > dt,
dl.footnote > dt,
dl.citation > dt {
  font-weight: bold;
  clear: left;
  float: left;
  margin: 0;
  padding: 0;
  padding-right: 0.5em;
}
/* Offset for field content (corresponds to the --field-name-limit option) */
dl.field-list > dd,
dl.option-list > dd,
dl.docinfo > dd {
  margin-left:  9em; /* ca. 14 chars in the test examples */
}
/* start field-body on a new line after long field names */
dl.field-list > dd > *:first-child,
dl.option-list > dd > *:first-child
{
  display: inline-block;
  width: 100%;
  margin: 0;
}
/* field names followed by a colon */
dl.field-list > dt:after,
dl.docinfo > dt:after {
  content: ":";
}

/* Bibliographic Fields (docinfo) */
pre.address { font: inherit; }
dd.authors > p { margin: 0; }

/* Option Lists */
dl.option-list { margin-left: 40px; }
dl.option-list > dt { font-weight: normal; }
span.option { white-space: nowrap; }

/* Footnotes and Citations  */
dl.footnote.superscript > dd {margin-left: 1em; }
dl.footnote.brackets > dd {margin-left: 2em; }
dl > dt.label { font-weight: normal; }
a.footnote-reference.brackets:before,
dt.label > span.brackets:before { content: "["; }
a.footnote-reference.brackets:after,
dt.label > span.brackets:after { content: "]"; }
a.footnote-reference.superscript,
dl.footnote.superscript > dt.label {
  vertical-align: super;
  font-size: smaller;
}
dt.label > span.fn-backref { margin-left: 0.2em; }
dt.label > span.fn-backref > a { font-style: italic; }

/* Line Blocks */
div.line-block { display: block; }
div.line-block div.line-block {
  margin-top: 0;
  margin-bottom: 0;
  margin-left: 40px;
}

/* Figures, Images, and Tables */
.figure.align-left,
img.align-left,
object.align-left,
table.align-left {
  margin-right: auto;
}
.figure.align-center,
img.align-center,
object.align-center {
  margin-left: auto;
  margin-right: auto;
  display: block;
}
table.align-center {
  margin-left: auto;
  margin-right: auto;
}
.figure.align-right,
img.align-right,
object.align-right,
table.align-right {
  margin-left: auto;
}
/* reset inner alignment in figures and tables */
/* div.align-left, div.align-center, div.align-right, */
table.align-left, table.align-center, table.align-right
{ text-align: inherit }

/* Admonitions and System Messages */
div.admonition,
div.system-message,
div.sidebar{
  margin: 40px;
  border: medium outset;
  padding-right: 1em;
  padding-left: 1em;
}

/* Sidebar */
div.sidebar {
  width: 30%;
  max-width: 26em;
  float: right;
  clear: right;
}

/* Text Blocks */
div.topic,
pre.literal-block,
pre.doctest-block,
pre.math,
pre.code {
  margin-right: 40px;
  margin-left: 40px;
}
pre.code .ln { color: gray; } /* line numbers */

/* Tables */
table { border-collapse: collapse; }
td, th {
  border-style: solid;
  border-color: silver;
  padding: 0 1ex;
  border-width: thin;
}
td > p:first-child, th > p:first-child { margin-top: 0; }
td > p, th > p { margin-bottom: 0; }

table > caption {
  text-align: left;
  margin-bottom: 0.25em
}

table.borderless td, table.borderless th {
  border: 0;
  padding: 0;
  padding-right: 0.5em /* separate table cells */
}

</style>
<style type="text/css">

/* CSS31_ style sheet for the output of Docutils HTML writers.             */
/* Rules for easy reading and pre-defined style variants.		   */
/*                                                                         */
/* :Author: Günter Milde, based on html4css1.css by David Goodger          */
/* :Id: $Id: plain.css 8120 2017-06-22 21:02:40Z milde $               */
/* :Copyright: © 2015 Günter Milde.                                        */
/* :License: Released under the terms of the `2-Clause BSD license`_,      */
/*    in short:                                                            */
/*                                                                         */
/*    Copying and distribution of this file, with or without modification, */
/*    are permitted in any medium without royalty provided the copyright   */
/*    notice and this notice are preserved.                                */
/*    	     	      	     	 					   */
/*    This file is offered as-is, without any warranty.                    */
/*                                                                         */
/* .. _2-Clause BSD license: http://www.spdx.org/licenses/BSD-2-Clause     */
/* .. _CSS3: http://www.w3.org/TR/CSS3		        		   */


/* Document Structure */
/* ****************** */

/* "page layout" */
body {
  padding: 0 5%;
  margin: 8px 0;
}
div.document {
  line-height:1.3;
  counter-reset: table;
  /* counter-reset: figure; */
  /* avoid long lines --> better reading */
  /* OTOH: lines should not be too short because of missing hyphenation, */
  max-width: 50em;
  margin: auto;
}

/* Sections */

/* Transitions */

hr.docutils {
  width: 80%;
  margin-top: 1em;
  margin-bottom: 1em;
  clear: both;
}

/* Paragraphs               */
/* ==========               */

/* vertical space (parskip) */
p, ol, ul, dl,
div.line-block,
table{
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}
h1, h2, h3, h4, h5, h6,
dl > dd {
  margin-bottom: 0.5em;
}

/* Lists                    */
/* ==========               */

/* Definition Lists         */

dl > dd > p:first-child { margin-top: 0; }
/* :last-child is not part of CSS 2.1 (introduced in CSS 3) */
dl > dd > p:last-child  { margin-bottom: 0; }

/* lists nested in definition lists */
/* :only-child is not part of CSS 2.1 (introduced in CSS 3) */
dd > ul:only-child, dd > ol:only-child { padding-left: 1em; }

/* Description Lists */
/* styled like in most dictionaries, encyclopedias etc. */
dl.description > dt {
  font-weight: bold;
  clear: left;
  float: left;
  margin: 0;
  padding: 0;
  padding-right: 0.5em;
}

/* Field Lists */

/* example for custom field-name width */
dl.field-list.narrow > dd {
  margin-left: 5em;
}
/* run-in: start field-body on same line after long field names */
dl.field-list.run-in > dd p {
  display: block;
}

/* Bibliographic Fields */

/* generally, bibliographic fields use special definition list dl.docinfo */
/* but dedication and abstract are placed into "topic" divs */
div.abstract p.topic-title {
  text-align: center;
}
div.dedication {
  margin: 2em 5em;
  text-align: center;
  font-style: italic;
}
div.dedication p.topic-title {
  font-style: normal;
}

/* Citations */
dl.citation dt.label {
  font-weight: bold;
}
span.fn-backref {
  font-weight: normal;
}

/* Text Blocks           */
/* ============          */

/* Literal Blocks           */
pre.literal-block, pre.doctest-block,
pre.math, pre.code {
  margin-left: 1.5em;
  margin-right: 1.5em
}

/* Block Quotes             */

blockquote,
div.topic {
  margin-left: 1.5em;
  margin-right: 1.5em
}
blockquote > table,
div.topic > table {
  margin-top: 0;
  margin-bottom: 0;
}
blockquote p.attribution,
div.topic p.attribution {
  text-align: right;
  margin-left: 20%;
}

/* Tables                   */
/* ======                   */

/* th { vertical-align: bottom; } */

table tr { text-align: left; }

/* "booktabs" style (no vertical lines) */
table.booktabs {
  border: 0;
  border-top: 2px solid;
  border-bottom: 2px solid;
  border-collapse: collapse;
}
table.booktabs * {
  border: 0;
}
table.booktabs th {
  border-bottom: thin solid;
}

/* numbered tables (counter defined in div.document) */
table.numbered > caption:before {
  counter-increment: table;
  content: "Table " counter(table) ": ";
  font-weight: bold;
}

/* Explicit Markup Blocks   */
/* ======================   */

/* Footnotes and Citations  */
/* -----------------------  */

/* line on the left */
dl.footnote {
  padding-left: 1ex;
  border-left: solid;
  border-left-width: thin;
}

/* Directives               */
/* ----------               */

/* Body Elements            */
/* ~~~~~~~~~~~~~            */

/* Images and Figures */

/* let content flow to the side of aligned images and figures */
.figure.align-left,
img.align-left,
object.align-left {
  display: block;
  clear: left;
  float: left;
  margin-right: 1em
}
.figure.align-right,
img.align-right,
object.align-right {
  display: block;
  clear: right;
  float: right;
  margin-left: 1em
}
/* Stop floating sidebars, images and figures at section level 1,2,3 */
h1, h2, h3 { clear: both; }

/* Sidebar */

/* Move into the margin. In a layout with fixed margins, */
/* it can be moved into the margin completely.		 */
div.sidebar {
  width: 30%;
  max-width: 26em;
  margin-left: 1em;
  margin-right: -5.5%;
  background-color: #ffffee ;
}

/* Code                     */

pre.code, code { background-color: #eeeeee }
pre.code .ln { color: gray; } /* line numbers */
/* basic highlighting: for a complete scheme, see */
/* http://docutils.sourceforge.net/sandbox/stylesheets/ */
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

/* Math                     */
/* styled separately (see math.css for math-output=HTML) */

/* Epigraph                 */
/* Highlights               */
/* Pull-Quote               */
/* Compound Paragraph       */
/* Container                */

/* can be styled in a custom stylesheet */

/* Document Header and Footer */

div.footer, div.header {
  clear: both;
  font-size: smaller;
}

/* Inline Markup            */
/* =============            */

/* Emphasis                 */
/*   em                     */
/* Strong Emphasis          */
/*   strong		    */
/* Interpreted Text         */
/*   span.interpreted  	    */
/* Title Reference 	    */
/*   cite		    */
/* Inline Literals          */
/* possible values: normal, nowrap, pre, pre-wrap, pre-line */
/*   span.docutils.literal { white-space: pre-wrap; } */

/* Hyperlink References     */
a { text-decoration: none; }

/* External Targets         */
/*   span.target.external   */
/* Internal Targets  	    */
/*   span.target.internal   */
/* Footnote References      */
/*   a.footnote-reference   */
/* Citation References      */
/*   a.citation-reference   */

</style>
<style type="text/css">

.kbd
{
    -moz-border-radius:3px;
    -moz-box-shadow:0 1px 0 rgba(0,0,0,0.2),0 0 0 2px #fff inset;
    -webkit-border-radius:3px;
    -webkit-box-shadow:0 1px 0 rgba(0,0,0,0.2),0 0 0 2px #fff inset;
    background-color:#f7f7f7;
    border:1px solid #ccc;
    border-radius:3px;
    box-shadow:0 1px 0 rgba(0,0,0,0.2),0 0 0 2px #fff inset;
    color:#333;
    display:inline-block;
    font-family:Arial,Helvetica,sans-serif;
    font-size:15px;
    line-height:1.4;
    margin:0 .1em;
    padding:.1em .6em;
    text-shadow:0 1px 0 #fff;
}

</style>
</head>
<body>
<div class="document" id="docker-cheat-sheet">
<h1 class="title">Docker Cheat Sheet</h1>

<p><a class="reference external" href="../blog.html">&lt; Blog</a></p>
<p>A quick reference to Docker.</p>
<p>Created on: 2019-03-19</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>under heavy construction and not well organized</p>
</div>
<div class="section" id="install-docker-on-ubuntu">
<h1>install docker on ubuntu</h1>
<p>to docker install on ubuntu:</p>
<pre class="literal-block">sudo apt-get remove docker docker-engine docker.io -y
sudo apt-get update

sudo apt-get install apt-transport-https ca-certificates curl software-properties-common -y
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
sudo add-apt-repository &quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable&quot;
sudo apt-get update

sudo apt-get install docker-ce -y</pre>
<p>source: <a class="reference external" href="https://docs.docker.com/v17.09/engine/installation/linux/docker-ce/ubuntu/">https://docs.docker.com/v17.09/engine/installation/linux/docker-ce/ubuntu/</a></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is not recommanded as it creates an attack serface for privilege escalation. See more at: <cite>Privilege escalation via Docker&lt;https://fosterelli.co/privilege-escalation-via-docker&gt;</cite>. To fix this just remove the user from <cite>docker</cite> group with <cite>sudo gpasswd -d $USER docker</cite>.</p>
</div>
<p>after install:</p>
<pre class="literal-block">sudo groupadd docker
sudo usermod -aG docker $USER</pre>
<p>Now logout or reboot to see the change in effect.</p>
<p>source: <a class="reference external" href="https://docs.docker.com/v17.09/engine/installation/linux/linux-postinstall">https://docs.docker.com/v17.09/engine/installation/linux/linux-postinstall</a></p>
<p>test your installation:</p>
<pre class="literal-block">docker run hello-world</pre>
</div>
<div class="section" id="install-docker-compose-on-ubuntu">
<h1>install docker-compose on ubuntu</h1>
<p>to install docker-compose on ubuntu:</p>
<pre class="literal-block">sudo curl -L &quot;https://github.com/docker/compose/releases/download/1.24.1/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose</pre>
<p>source: <a class="reference external" href="https://docs.docker.com/compose/install/">https://docs.docker.com/compose/install/</a></p>
</div>
<div class="section" id="docker-compose-bash-compilation">
<h1>docker-compose bash compilation</h1>
<p>to have bash compilation for docker-compose:</p>
<pre class="literal-block">sudo curl -L https://raw.githubusercontent.com/docker/compose/1.24.1/contrib/completion/bash/docker-compose -o /etc/bash_completion.d/docker-compose</pre>
<p>now restart bash</p>
<p>source: <a class="reference external" href="https://docs.docker.com/compose/completion/">https://docs.docker.com/compose/completion/</a></p>
</div>
<div class="section" id="shell-access-on-a-docker-image">
<h1>shell access on a docker image</h1>
<p><a class="reference external" href="https://stackoverflow.com/questions/30172605/how-do-i-get-into-a-docker-containers-shell#comment75385171_30172605">https://stackoverflow.com/questions/30172605/how-do-i-get-into-a-docker-containers-shell#comment75385171_30172605</a>
<a class="reference external" href="https://stackoverflow.com/questions/22049212/copying-files-from-docker-container-to-host#22050116">https://stackoverflow.com/questions/22049212/copying-files-from-docker-container-to-host#22050116</a></p>
</div>
<div class="section" id="list-container">
<h1>list container</h1>
<p>to list running container:</p>
<pre class="literal-block">docker ps</pre>
<p>to list all container:</p>
<pre class="literal-block">docker ps -a</pre>
</div>
<div class="section" id="run-a-docker-image-as-a-container-in-background">
<h1>run a docker image as a container in background</h1>
<p>to run a docker image as a container do the following:</p>
<pre class="literal-block">docker run -d repository
docker run -d repository:tag
docker run -d image_id</pre>
<p>source: <a class="reference external" href="https://stackoverflow.com/a/50208526/5350059">https://stackoverflow.com/a/50208526/5350059</a></p>
</div>
<div class="section" id="shell-access-on-a-docker-container">
<h1>shell access on a docker container</h1>
<p>two ways to do it <a class="footnote-reference brackets" href="#id2" id="id1">1</a>. <span class="docutils literal">attach</span> and <span class="docutils literal">exec</span>.</p>
<div class="section" id="using-attach">
<h2>using <span class="docutils literal">attach</span></h2>
<pre class="literal-block">sudo docker attach image_id

#OR

sudo docker attach repository #by Name</pre>
</div>
<div class="section" id="using-exec">
<h2>using <span class="docutils literal">exec</span></h2>
<pre class="literal-block">sudo docker exec -i -t image_id /bin/bash

#OR

sudo docker exec -i -t repository /bin/bash</pre>
</div>
</div>
<div class="section" id="duplicate-an-image">
<h1>duplicate an image</h1>
<p>to duplicate an image:</p>
<pre class="literal-block">docker tag image new_image</pre>
<p>source: <a class="reference external" href="https://stackoverflow.com/a/45779866/5350059">https://stackoverflow.com/a/45779866/5350059</a></p>
</div>
<div class="section" id="sleep-in-between-two-commands">
<h1>sleep in between two commands</h1>
<p>we can put pause in between two commands for 60 seconds by putting the following in between those commands:</p>
<pre class="literal-block">RUN sleep 60</pre>
<p>source: <a class="reference external" href="https://forums.docker.com/t/how-to-delay-execution-of-next-line-in-dockefile/50022/2">https://forums.docker.com/t/how-to-delay-execution-of-next-line-in-dockefile/50022/2</a></p>
</div>
<div class="section" id="completely-remove-docker">
<h1>completely remove docker</h1>
<p>to completely remove docker and all related file, first identify what installed package we have:</p>
<pre class="literal-block">dpkg -l | grep -i docker</pre>
<p>Then run the following:</p>
<pre class="literal-block">sudo apt-get purge -y docker-engine docker docker.io docker-ce docker-ce-cli
sudo apt-get autoremove -y --purge docker-engine docker docker.io docker-ce docker-ce-cli</pre>
<p>Make sure the above commands has all the following packages from the <cite>dpkg -l</cite> command. If not add them at the end. The above commands will not remove images, containers, volumes, or user created configuration files on your host. If you wish to delete all images, containers, and volumes run the following commands:</p>
<pre class="literal-block">sudo rm -rf /var/lib/docker
sudo rm /etc/apparmor.d/docker
sudo groupdel docker
sudo rm -rf /var/run/docker.sock
sudo rm -rf /etc/docker
sudo rm -rf ~/.docker</pre>
<p>Finally remove docker-compose:</p>
<pre class="literal-block">sudo rm /usr/local/bin/docker-compose</pre>
<p>source: <a class="reference external" href="https://askubuntu.com/a/1021506/502875">https://askubuntu.com/a/1021506/502875</a></p>
</div>
<div class="section" id="install-tzdata-without-user-interaction">
<h1>install tzdata without user interaction</h1>
<p>to install tzdata without user interaction, put this in Dockerfile:</p>
<pre class="literal-block">ARG DEBIAN_FRONTEND=noninteractive</pre>
<p>source: <a class="reference external" href="https://askubuntu.com/a/1013396/502875">https://askubuntu.com/a/1013396/502875</a></p>
</div>
<div class="section" id="remove-all-images-and-containers">
<h1>remove all images and containers</h1>
<p>to remove all images and containers:</p>
<pre class="literal-block">docker rm $(docker ps -a -q)
docker rmi -f $(docker images -q)</pre>
<p>source: <a class="reference external" href="https://techoverflow.net/2013/10/22/docker-remove-all-images-and-containers/">https://techoverflow.net/2013/10/22/docker-remove-all-images-and-containers/</a></p>
</div>
<div class="section" id="execute-source-command-inside-dockerfile">
<h1>execute <cite>source</cite> command inside Dockerfile</h1>
<p>to execute <cite>source</cite> command inside Dockerfile:</p>
<pre class="literal-block">RUN /bin/bash -c &quot;source /path/to/file&quot;</pre>
<p>source: <a class="reference external" href="https://stackoverflow.com/a/25086628/5350059">https://stackoverflow.com/a/25086628/5350059</a></p>
</div>
<div class="section" id="rebuild-docker-image">
<h1>rebuild docker image</h1>
<p>to rebuild docker image with docker-compose:</p>
<pre class="literal-block">docker-compose build -f /path/to/docker-compose.yml</pre>
<p>source: <a class="reference external" href="https://stackoverflow.com/a/57027380/5350059">https://stackoverflow.com/a/57027380/5350059</a></p>
</div>
<div class="section" id="remove-unused-data">
<h1>remove unused data</h1>
<p>to removed unused data:</p>
<pre class="literal-block">docker system prune</pre>
<p>source: <a class="reference external" href="https://docs.docker.com/engine/reference/commandline/system_prune/">https://docs.docker.com/engine/reference/commandline/system_prune/</a></p>
</div>
<div class="section" id="see-log">
<h1>see log</h1>
<p>to see log:</p>
<pre class="literal-block">docker logs container_id</pre>
</div>
<div class="section" id="stop-container">
<h1>stop container</h1>
<p>to stop a container gracefully with <cite>SIGTERM</cite>:</p>
<pre class="literal-block">docker stop container_id</pre>
<p>to kill a container with <cite>SIGKILL</cite> when it is stuck:</p>
<pre class="literal-block">docker kill container_id</pre>
</div>
<div class="section" id="run-command-inside-a-container">
<h1>run command inside a container</h1>
<p>to run command inside a container:</p>
<pre class="literal-block">docker exac -it container_id command</pre>
</div>
<div class="section" id="docker-compose-environment-variables">
<h1>docker-compose environment variables</h1>
<p>in compose either:</p>
<pre class="literal-block">.env file</pre>
<p>or:</p>
<pre class="literal-block">environment:
  - key1=value1
  - key2=value2</pre>
<p>source: <a class="reference external" href="https://docs.docker.com/compose/environment-variables/">https://docs.docker.com/compose/environment-variables/</a></p>
</div>
<div class="section" id="docker-run-environment-variables">
<h1>docker run environment variables</h1>
<p>to use environment variables in docker run either:</p>
<pre class="literal-block">docker run --env-file ./env.list ubuntu bash</pre>
<p>or:</p>
<pre class="literal-block">docker run -e &quot;key1=value1&quot; -e &quot;key2=value2&quot; ubuntu bash</pre>
<p>source: <a class="reference external" href="https://docs.docker.com/engine/reference/run/#env-environment-variables">https://docs.docker.com/engine/reference/run/#env-environment-variables</a> <a class="reference external" href="https://stackoverflow.com/a/30494145/5350059">https://stackoverflow.com/a/30494145/5350059</a></p>
</div>
<div class="section" id="update-docker-images">
<h1>update docker images</h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>need to test</p>
</div>
<pre class="literal-block">docker-compose pull

docker-compose up -d</pre>
<p><a class="reference external" href="https://stackoverflow.com/a/43515922/5350059">https://stackoverflow.com/a/43515922/5350059</a></p>
<p><a class="reference external" href="https://stackoverflow.com/a/49316987/5350059">https://stackoverflow.com/a/49316987/5350059</a></p>
</div>
<div class="section" id="docker-nginx-custom-config">
<h1>docker nginx custom config</h1>
<p>to use a custom configuration for nginx:</p>
<pre class="literal-block">FROM nginx

COPY more_web_nginx.conf /etc/nginx/conf.d/

RUN rm /etc/nginx/conf.d/default.conf

COPY . /usr/share/nginx/html</pre>
<p>source: <a class="reference external" href="https://stackoverflow.com/a/30152496/5350059">https://stackoverflow.com/a/30152496/5350059</a></p>
</div>
<div class="section" id="map-docker-container-port-to-a-specific-interface-on-host">
<h1>map docker container port to a specific interface on host</h1>
<p>to map docker container port to a specific interface on host:</p>
<pre class="literal-block">docker run -p &lt;interface IP&gt;:&lt;outside port&gt;:&lt;inside port&gt; $REST_OF_THE_COMMAND</pre>
<p>source: <a class="reference external" href="https://stackoverflow.com/a/48874124/5350059">https://stackoverflow.com/a/48874124/5350059</a></p>
</div>
<div class="section" id="give-name-to-a-image">
<h1>give name to a image</h1>
<p>to give name to a image:</p>
<pre class="literal-block">version: '3'
services:
  # for an image already build just put container_name bellow image
  db:
        image: postgres:10.1-alpine
        container_name: more_db
  # for an image we are building put container_name bellow build
  web:
        build:
          context: .
          dockerfile: Dockerfile
        container_name: web_dev</pre>
<p>source: <a class="reference external" href="https://stackoverflow.com/a/35662191/5350059">How do I define the name of image built with docker-compose</a></p>
</div>
<div class="section" id="copy-as-non-root">
<h1>COPY as non root</h1>
<p>to COPY as non root:</p>
<pre class="literal-block">COPY --chown=&lt;user&gt;:&lt;group&gt; &lt;hostPath&gt; &lt;containerPath&gt;</pre>
<p>source: <a class="reference external" href="https://stackoverflow.com/a/44766666/5350059">How do I Docker COPY as non root?</a></p>
</div>
<div class="section" id="source">
<h1>Source</h1>
<dl class="footnote brackets">
<dt class="label" id="id2"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p><a class="reference external" href="https://askubuntu.com/a/507009/502875">How to get bash or ssh into a running container in background mode?</a></p>
</dd>
</dl>
</div>
</div>
<div class="footer">
<hr class="footer" />
<p><a class="reference external" href="/source/blogs/docker_cheat_sheet.rst">View document source</a>.
Generated on: 2019-12-21 12:31 UTC.
</p>

</div>
</body>
</html>
