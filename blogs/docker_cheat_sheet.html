<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.14: http://docutils.sourceforge.net/" />
<title>Docker Cheat Sheet</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7952 2016-07-26 18:15:59Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

.subscript {
  vertical-align: sub;
  font-size: smaller }

.superscript {
  vertical-align: super;
  font-size: smaller }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title, .code .error {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left, table.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right, table.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

table.align-center {
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

.align-top    {
  vertical-align: top }

.align-middle {
  vertical-align: middle }

.align-bottom {
  vertical-align: bottom }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em ;
  margin-right: 2em }

pre.code .ln { color: grey; } /* line numbers */
pre.code, code { background-color: #eeeeee }
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

/* "booktabs" style (no vertical lines) */
table.docutils.booktabs {
  border: 0px;
  border-top: 2px solid;
  border-bottom: 2px solid;
  border-collapse: collapse;
}
table.docutils.booktabs * {
  border: 0px;
}
table.docutils.booktabs th {
  border-bottom: thin solid;
  text-align: left;
}

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
<style type="text/css">

body {
    padding: 40px;
}

.kbd
{
    -moz-border-radius:3px;
    -moz-box-shadow:0 1px 0 rgba(0,0,0,0.2),0 0 0 2px #fff inset;
    -webkit-border-radius:3px;
    -webkit-box-shadow:0 1px 0 rgba(0,0,0,0.2),0 0 0 2px #fff inset;
    background-color:#f7f7f7;
    border:1px solid #ccc;
    border-radius:3px;
    box-shadow:0 1px 0 rgba(0,0,0,0.2),0 0 0 2px #fff inset;
    color:#333;
    display:inline-block;
    font-family:Arial,Helvetica,sans-serif;
    font-size:15px;
    line-height:1.4;
    margin:0 .1em;
    padding:.1em .6em;
    text-shadow:0 1px 0 #fff;
}

</style>
</head>
<body>
<div class="document" id="docker-cheat-sheet">
<h1 class="title">Docker Cheat Sheet</h1>

<p><a class="reference external" href="../blog.html">&lt; Blog</a></p>
<p>A quick reference to Docker.</p>
<p>Created on: 2019-03-19</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">under heavy construction and not well organized</p>
</div>
<div class="section" id="install-docker-on-ubuntu">
<h1>install docker on ubuntu</h1>
<p>to docker install on ubuntu:</p>
<pre class="literal-block">
sudo apt-get remove docker docker-engine docker.io -y
sudo apt-get update

sudo apt-get install apt-transport-https ca-certificates curl software-properties-common -y
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
sudo add-apt-repository &quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable&quot;
sudo apt-get update

sudo apt-get install docker-ce -y
</pre>
<p>source: <a class="reference external" href="https://docs.docker.com/v17.09/engine/installation/linux/docker-ce/ubuntu/">https://docs.docker.com/v17.09/engine/installation/linux/docker-ce/ubuntu/</a></p>
<p>after install:</p>
<pre class="literal-block">
sudo groupadd docker
sudo usermod -aG docker $USER
</pre>
<p>Now logout or reboot to see the change in effect.</p>
<p>source: <a class="reference external" href="https://docs.docker.com/v17.09/engine/installation/linux/linux-postinstall">https://docs.docker.com/v17.09/engine/installation/linux/linux-postinstall</a></p>
<p>test your installation:</p>
<pre class="literal-block">
docker run hello-world
</pre>
</div>
<div class="section" id="install-docker-compose-on-ubuntu">
<h1>install docker-compose on ubuntu</h1>
<p>to install docker-compose on ubuntu:</p>
<pre class="literal-block">
sudo curl -L &quot;https://github.com/docker/compose/releases/download/1.24.1/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
</pre>
<p>source: <a class="reference external" href="https://docs.docker.com/compose/install/">https://docs.docker.com/compose/install/</a></p>
</div>
<div class="section" id="docker-compose-bash-compilation">
<h1>docker-compose bash compilation</h1>
<p>to have bash compilation for docker-compose:</p>
<pre class="literal-block">
sudo curl -L https://raw.githubusercontent.com/docker/compose/1.24.1/contrib/completion/bash/docker-compose -o /etc/bash_completion.d/docker-compose
</pre>
<p>now restart bash</p>
<p>source: <a class="reference external" href="https://docs.docker.com/compose/completion/">https://docs.docker.com/compose/completion/</a></p>
</div>
<div class="section" id="shell-access-on-a-docker-image">
<h1>shell access on a docker image</h1>
<p><a class="reference external" href="https://stackoverflow.com/questions/30172605/how-do-i-get-into-a-docker-containers-shell#comment75385171_30172605">https://stackoverflow.com/questions/30172605/how-do-i-get-into-a-docker-containers-shell#comment75385171_30172605</a>
<a class="reference external" href="https://stackoverflow.com/questions/22049212/copying-files-from-docker-container-to-host#22050116">https://stackoverflow.com/questions/22049212/copying-files-from-docker-container-to-host#22050116</a></p>
</div>
<div class="section" id="list-container">
<h1>list container</h1>
<p>to list running container:</p>
<pre class="literal-block">
docker ps
</pre>
<p>to list all container:</p>
<pre class="literal-block">
docker ps -a
</pre>
</div>
<div class="section" id="run-a-docker-image-as-a-container-in-background">
<h1>run a docker image as a container in background</h1>
<p>to run a docker image as a container do the following:</p>
<pre class="literal-block">
docker run -d repository
docker run -d repository:tag
docker run -d image_id
</pre>
<p>source: <a class="reference external" href="https://stackoverflow.com/a/50208526/5350059">https://stackoverflow.com/a/50208526/5350059</a></p>
</div>
<div class="section" id="shell-access-on-a-docker-container">
<h1>shell access on a docker container</h1>
<p>two ways to do it <a class="footnote-reference" href="#id2" id="id1">[1]</a>. <tt class="docutils literal">attach</tt> and <tt class="docutils literal">exec</tt>.</p>
<div class="section" id="using-attach">
<h2>using <tt class="docutils literal">attach</tt></h2>
<pre class="literal-block">
sudo docker attach image_id

#OR

sudo docker attach repository #by Name
</pre>
</div>
<div class="section" id="using-exec">
<h2>using <tt class="docutils literal">exec</tt></h2>
<pre class="literal-block">
sudo docker exec -i -t image_id /bin/bash

#OR

sudo docker exec -i -t repository /bin/bash
</pre>
</div>
</div>
<div class="section" id="duplicate-an-image">
<h1>duplicate an image</h1>
<p>to duplicate an image:</p>
<pre class="literal-block">
docker tag image new_image
</pre>
<p>source: <a class="reference external" href="https://stackoverflow.com/a/45779866/5350059">https://stackoverflow.com/a/45779866/5350059</a></p>
</div>
<div class="section" id="sleep-in-between-two-commands">
<h1>sleep in between two commands</h1>
<p>we can put pause in between two commands for 60 seconds by putting the following in between those commands:</p>
<pre class="literal-block">
RUN sleep 60
</pre>
<p>source: <a class="reference external" href="https://forums.docker.com/t/how-to-delay-execution-of-next-line-in-dockefile/50022/2">https://forums.docker.com/t/how-to-delay-execution-of-next-line-in-dockefile/50022/2</a></p>
</div>
<div class="section" id="completely-remove-docker">
<h1>completely remove docker</h1>
<p>to completely remove docker and all related file, first identify what installed package we have:</p>
<pre class="literal-block">
dpkg -l | grep -i docker
</pre>
<p>Then run the following:</p>
<pre class="literal-block">
sudo apt-get purge -y docker-engine docker docker.io docker-ce docker-ce-cli
sudo apt-get autoremove -y --purge docker-engine docker docker.io docker-ce docker-ce-cli
</pre>
<p>Make sure the above commands has all the following packages from the <cite>dpkg -l</cite> command. If not add them at the end. The above commands will not remove images, containers, volumes, or user created configuration files on your host. If you wish to delete all images, containers, and volumes run the following commands:</p>
<pre class="literal-block">
sudo rm -rf /var/lib/docker
sudo rm /etc/apparmor.d/docker
sudo groupdel docker
sudo rm -rf /var/run/docker.sock
sudo rm -rf /etc/docker
sudo rm -rf ~/.docker
</pre>
<p>Finally remove docker-compose:</p>
<pre class="literal-block">
sudo rm /usr/local/bin/docker-compose
</pre>
<p>source: <a class="reference external" href="https://askubuntu.com/a/1021506/502875">https://askubuntu.com/a/1021506/502875</a></p>
</div>
<div class="section" id="install-tzdata-without-user-interaction">
<h1>install tzdata without user interaction</h1>
<p>to install tzdata without user interaction, put this in Dockerfile:</p>
<pre class="literal-block">
ARG DEBIAN_FRONTEND=noninteractive
</pre>
<p>source: <a class="reference external" href="https://askubuntu.com/a/1013396/502875">https://askubuntu.com/a/1013396/502875</a></p>
</div>
<div class="section" id="remove-all-images-and-containers">
<h1>remove all images and containers</h1>
<p>to remove all images and containers:</p>
<pre class="literal-block">
docker rm $(docker ps -a -q)
docker rmi -f $(docker images -q)
</pre>
<p>source: <a class="reference external" href="https://techoverflow.net/2013/10/22/docker-remove-all-images-and-containers/">https://techoverflow.net/2013/10/22/docker-remove-all-images-and-containers/</a></p>
</div>
<div class="section" id="execute-source-command-inside-dockerfile">
<h1>execute <cite>source</cite> command inside Dockerfile</h1>
<p>to execute <cite>source</cite> command inside Dockerfile:</p>
<pre class="literal-block">
RUN /bin/bash -c &quot;source /path/to/file&quot;
</pre>
<p>source: <a class="reference external" href="https://stackoverflow.com/a/25086628/5350059">https://stackoverflow.com/a/25086628/5350059</a></p>
</div>
<div class="section" id="rebuild-docker-image">
<h1>rebuild docker image</h1>
<p>to rebuild docker image with docker-compose:</p>
<pre class="literal-block">
docker-compose build -f /path/to/docker-compose.yml
</pre>
<p>source: <a class="reference external" href="https://stackoverflow.com/a/57027380/5350059">https://stackoverflow.com/a/57027380/5350059</a></p>
</div>
<div class="section" id="remove-unused-data">
<h1>remove unused data</h1>
<p>to removed unused data:</p>
<pre class="literal-block">
docker system prune
</pre>
<p>source: <a class="reference external" href="https://docs.docker.com/engine/reference/commandline/system_prune/">https://docs.docker.com/engine/reference/commandline/system_prune/</a></p>
</div>
<div class="section" id="see-log">
<h1>see log</h1>
<p>to see log:</p>
<pre class="literal-block">
docker logs container_id
</pre>
</div>
<div class="section" id="stop-container">
<h1>stop container</h1>
<p>to stop a container gracefully with <cite>SIGTERM</cite>:</p>
<pre class="literal-block">
docker stop container_id
</pre>
<p>to kill a container with <cite>SIGKILL</cite> when it is stuck:</p>
<pre class="literal-block">
docker kill container_id
</pre>
</div>
<div class="section" id="run-command-inside-a-container">
<h1>run command inside a container</h1>
<p>to run command inside a container:</p>
<pre class="literal-block">
docker exac -it container_id command
</pre>
</div>
<div class="section" id="docker-compose-environment-variables">
<h1>docker-compose environment variables</h1>
<p>either:</p>
<pre class="literal-block">
.env file
</pre>
<p>or:</p>
<pre class="literal-block">
-e
</pre>
<p>in docker run</p>
<p><a class="reference external" href="https://docs.docker.com/compose/environment-variables/">https://docs.docker.com/compose/environment-variables/</a></p>
</div>
<div class="section" id="update-docker-images">
<h1>update docker images</h1>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">need to test</p>
</div>
<pre class="literal-block">
docker-compose pull

docker-compose up -d
</pre>
<p><a class="reference external" href="https://stackoverflow.com/a/43515922/5350059">https://stackoverflow.com/a/43515922/5350059</a></p>
<p><a class="reference external" href="https://stackoverflow.com/a/49316987/5350059">https://stackoverflow.com/a/49316987/5350059</a></p>
</div>
<div class="section" id="docker-nginx-custom-config">
<h1>docker nginx custom config</h1>
<p><a class="reference external" href="https://stackoverflow.com/a/30152496/5350059">https://stackoverflow.com/a/30152496/5350059</a></p>
</div>
<div class="section" id="source">
<h1>Source</h1>
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td><a class="reference external" href="https://askubuntu.com/a/507009/502875">How to get bash or ssh into a running container in background mode?</a></td></tr>
</tbody>
</table>
</div>
</div>
<div class="footer">
<hr class="footer" />
Generated on: 2019-12-09 11:15 UTC.

</div>
</body>
</html>
